# 開発ガイドライン

## AI開発時の重要事項

### 言語設定
- **思考**: 英語で思考する（Think in English）
- **回答**: 日本語で回答する（Answer in Japanese）

### Git運用ルール
1. **untrackedファイル**: コミット前に必ず確認
   - `rm`: 不要なファイルは削除
   - `git add`: 必要なファイルはステージング
   - `.gitignore`: 無視すべきファイルは追加
2. **コミットメッセージ**: 日本語で記述
3. **ブランチ運用**: 
   - mainブランチでは絶対にコミットしない
   - feature/ブランチで作業
   - mainへのマージはGitHubプルリクエスト経由のみ

### Spec Driven Development (SDD)
- `.spec-workflow/steering/`: プロダクト方針を確認
- `.spec-workflow/specs/argparse-core/`: 実装仕様を確認
- 新機能実装前に必ず仕様書を参照
- spec-workflowツールでタスク管理

### 型消去の実装について
- C++11では`std::any`が使用できない
- `argparse::detail::AnyValue`クラスで独自実装
- 型安全な値の保持と取得を提供

### パフォーマンス目標
- 引数100個で1ms未満の解析速度
- メモリ効率的な実装
- 不要な機能はコンパイルされない（ゼロオーバーヘッド）

### テスト方針
- **単体テスト**: 各コンポーネントを独立してテスト
- **統合テスト**: Python argparseとの互換性確認
- **回帰テスト**: 既存機能が壊れていないことを確認
- すべてのテストが通過することが必須

### エラーメッセージ
- Python argparseと同様のフォーマット
- ユーザーフレンドリーで明確なメッセージ
- 問題の解決方法を示唆

### 開発フロー
1. spec-workflowでタスク確認
2. 実装
3. テスト作成・実行
4. 静的解析
5. フォーマット確認
6. コミット前の最終確認
7. タスクステータス更新

## 禁止事項
- mainブランチへの直接コミット
- テストなしの機能追加
- 破壊的変更（既存APIの変更）
- C++11以降の機能の使用
- 外部ライブラリの追加（標準ライブラリのみ）
- cdコマンドの使用（カレントディレクトリ変更）